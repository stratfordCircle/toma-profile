{"version":3,"sources":["../../src/pages/attest/attest.module.ts","../../src/pages/attest/attest.ts"],"names":["AttestPageModule","__decorate","Object","__WEBPACK_IMPORTED_MODULE_0__angular_core__","declarations","__WEBPACK_IMPORTED_MODULE_2__attest__","imports","__WEBPACK_IMPORTED_MODULE_1_ionic_angular__","forChild","AttestPage","navCtrl","datepipe","navParams","_ALERT","cookieService","this","clientCypher","editRecords","tempElement","_COLL","__WEBPACK_IMPORTED_MODULE_1__environments_environment__","cycleCollection1","get","conferenceNameForQuery","console","log","_DB","__WEBPACK_IMPORTED_MODULE_3_firebase__","settings","timestampsInSnapshots","prototype","ngOnInit","ionViewCanEnter","displayAlert","message","subtitle","create","title","subTitle","buttons","text","present","_this","Promise","resolve","reject","getDocuments","then","data","catch","ionViewDidLoad","testAsync","hours1","checkSession","session","checkElement","document","getElementsByName","type","checked","setAllCheckboxes","conference","y","i","length","toString","setOneChecked_try2","obj","push","set","setOneChecked","_a","sent","loadConferenceRecords","JSON","stringify","findPairedSession","incomingSession","getColor","sessionId","concurrentCheck","x","compareToSession","decryptString","incomingEncryptedString","__WEBPACK_IMPORTED_MODULE_7_crypto_js___default","a","AES","decrypt","enc","Utf8","attestUser","isAdmin","query","collection","where","orderBy","querySnapshot","forEach","doc","hours_approved1","ce_date_from_timestamp2","ce_date","toDate","formatted_date_entered","transform","other","description","id","courseCredit","time","accreditor","error","saveNotice","eVent","element","elements","getElementById","value","updateDoc","approval","collectionObj","docID","dataObj","update","selector","template","__WEBPACK_IMPORTED_MODULE_2_ionic_angular__","__WEBPACK_IMPORTED_MODULE_6__angular_common__","__WEBPACK_IMPORTED_MODULE_5_ngx_cookie_service__"],"mappings":"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","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AttestPage } from './attest';\n\n@NgModule({\n  declarations: [\n    AttestPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AttestPage),\n  ],\n})\nexport class AttestPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/attest/attest.module.ts","import {Component, OnInit} from '@angular/core';\nimport { clientVars } from \"./../../environments/environment\";\nimport { IonicPage, NavController, AlertController, NavParams } from \"ionic-angular\";\nimport * as firebase from \"firebase\";\nimport \"firebase/firestore\";\nimport { CookieService } from \"ngx-cookie-service\";\nimport { DatePipe } from \"@angular/common\";\nimport { identifierModuleUrl } from \"@angular/compiler\";\nimport { Message } from '@angular/compiler/src/i18n/i18n_ast';\nimport CryptoJS from \"crypto-js\";\n\n/**\n * Generated class for the AttestPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: \"page-attest\",\n  templateUrl: \"attest.html\",\n})\n\nexport class AttestPage implements OnInit {\n/*   function check() {\n    document.getElementById(\"myCheck\").checked = true;\n}\n */\n\n  clientCypher: string = \"ishkabibble\";\n  isAdmin: boolean\n  editRecords = []\n  tempElement = []\n  conferenceNameForQuery: string\n  _COLL = clientVars.cycleCollection1 // MAY REMOVE THIS ALTOGETHER\n  private _DB : any\n  checkAgainst : string\n  checkSession\n  checkElement\n  \n  constructor(public navCtrl: NavController, public datepipe: DatePipe, public navParams: NavParams, private _ALERT: AlertController, private cookieService: CookieService) {\n\n/*     if (this.navParams.get(\"conferenceNameString\")) {\n      const conferenceNameForQuery = this.navParams.get(\"conferenceNameString\")\n      console.log(\"conference name from Param:\" + conferenceNameForQuery)\n    } */\n\n    if (this.navParams.get(\"conferenceNameString\")) {\n      this.conferenceNameForQuery = this.navParams.get(\"conferenceNameString\")\n      console.log(\"conference name from Param:\" + this.conferenceNameForQuery)\n    }\n\n    this._DB = firebase.firestore();\n    const settings = { timestampsInSnapshots: true }; //FIREBASE MADE A CHANGE TO READ TIMESTAMPS AS TIMESTAMPS INSTEAD OF AS SYSTEM DATE OBJECTS - THESE TWO LINES FORCE THE READ AS A TIMESTAMP TO PREPARE FOR THAT CHANGE WHEN FIREBASE IMPLEMENTS IT OR ELSE IT WOULD BE A BREAKING CHANGE\n    this._DB.settings(settings);\n\n  }\n\n  ngOnInit(): void {\n\n  /*   this.getDocuments(this.conferenceNameForQuery)\n    .then((data) =>\n    {\n      this.editRecords = data \n    //  this.testAsync()\n    }) */\n\n    this.ionViewCanEnter();\n    \n  }\n\n  displayAlert(message, subtitle): void {\n    let alert: any = this._ALERT.create({\n      title: message,\n      subTitle: subtitle, \n      buttons: [\n        {\n          text: \"Got It!\"\n          }\n      ]\n    });\n    alert.present();\n  }\n\n\n  ionViewCanEnter(): Promise<any>{\n    return new Promise((resolve, reject) => {\n\n     this.getDocuments(this.conferenceNameForQuery)\n      .then((data) =>\n      {\n        this.editRecords = data \n        resolve(true)\n      //  this.testAsync()\n      }).catch (() => {\n        resolve(false)\n      }\n      )\n    })\n   }\n\n//  ionViewWillEnter() {\n\n/*     if (this.navParams.get(\"conferenceNameString\")) {\n      this.conferenceNameForQuery = this.navParams.get(\"conferenceNameString\")\n      console.log(\"conference name from Param:\" + this.conferenceNameForQuery)\n    } */\n\n   /*  this.getDocuments(this.conferenceNameForQuery)\n    .then((data) =>\n    {\n      this.editRecords = data \n      console.log('this.editRecords[4].session' + this.editRecords[4].session)\n    }) */\n    \n  //}\n\n  ionViewDidLoad() {\n\n// maybe try this here -  this.testAsync()\n\n//    ionViewDidEnter () {\n\n      console.log(\"ionViewDidEnter\");\n\n// Cannot get this to set up before checking it... \n// Look at how I pull things in with Pickled Soul\n\n\n/*       this.getDocuments(this.conferenceNameForQuery)\n      .then((data) =>\n      {\n        this.editRecords = data \n\n        console.log('this.editRecords: ' + JSON.stringify(this.editRecords))\n\n        console.log('this.editRecords.length() ' + this.editRecords.length)\n\n        console.log('this.editRecords[4].session' + this.editRecords[4].session) */\n\n       \n    \n\n\n/*     console.log('this.editRecords.length() ' + this.editRecords.length) */\n\n\n/*     if (this.editRecords[i].hours1 > 0) {\n\n      this.setOneChecked(i).then((result) => {\n        console.log('result: ' + JSON.stringify(result))\n        this.tempElement = result;\n        this.tempElement[0].checked = true\n      });\n    }  */\n\n/*     const x = (<HTMLInputElement[]><any>document.getElementsByName('3'))\n    x[0].checked = true */\n    \n\n/*     if (this.navParams.get(\"conferenceNameString\")) {\n      this.conferenceNameForQuery = this.navParams.get(\"conferenceNameString\")\n      console.log(\"conference name from Param:\" + this.conferenceNameForQuery) */\n//      this.cookieService.set(\"conferenceCollectionCookie\", e, 0.02083333);\n\n//      this.loadConferenceRecords(this.conferenceNameForQuery)\n      \n      /* this.getDocuments(this.conferenceNameForQuery)\n      .then((data) =>\n      {\n        this.editRecords = data \n        const x = (<HTMLInputElement[]><any>document.getElementsByName(this.editRecords[4].session))\n        x[0].checked = true   */\n    /*     if (data) {\n          var i = 0 // or one?\n        this.editRecords = data  \n\n        while (i <  this.editRecords.length) {\n\n          console.log('this.editRecords[i].session:' + this.editRecords[i].session)\n\n          var x = <HTMLInputElement[]><any>document.getElementsByName(this.editRecords[i].session)\n\nconsole.log('type? ', x[0].type)\n\n          //x[0].checked = true\n\n\n\ni++\n\n      } \n\n    }\n */\n\n\n//  })\n\n     \n\n     /*  this.setAllCheckboxes(this.conferenceNameForQuery) */\n\n//    }\n\n    /* if (conferenceNameForQuery === \"\") {\n       this.isNoConference = true;\n       this.is63rdMidWinter = false;\n    }\n    if (conferenceNameForQuery === \"63rd MidWinter Conference\") {\n      this.isNoConference = false;\n      this.is63rdMidWinter = true;\n    }\n    this.cookieService.set(\"conferenceCollectionCookie\", e, 0.02083333);\n    //this.cycleCollection = e\n\n    this.retrieveCollection(); */\n    // this.setAllCheckboxes(this.conferenceNameForQuery)\n // })\n// this.testAsync()\n    }\n\n    testAsync() {\n      if (this.editRecords[1].hours1 > 0) {\n        console.log('searching session 1')\n        this.checkSession = this.editRecords[1].session\n        this.checkElement = (<HTMLInputElement[]><any>document.getElementsByName(this.checkSession))\n        //const x = (<HTMLInputElement[]><any>document.getElementsByName('1'))\n        console.log('type: ' + this.checkElement[0].type)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \n        this.checkElement[0].checked = true\n    }\n    if (this.editRecords[2].hours1 > 0) {\n      console.log('searching session 2')\n      this.checkSession = this.editRecords[2].session\n      this.checkElement = (<HTMLInputElement[]><any>document.getElementsByName(this.checkSession))\n      console.log('type: ' + this.checkElement[0].type)\n      this.checkElement[0].checked = true\n  }\n  if (this.editRecords[3].hours1 > 0) {\n    console.log('searching session 3')\n    this.checkElement = (<HTMLInputElement[]><any>document.getElementsByName('3'))\n    console.log('type: ' + this.checkElement[0].type)\n    this.checkElement[0].checked = true\n\n    // SRK - COULD POSSIBLY ADD A VARIABLE TO THE INPUT FOR CHECKED AND SET IT IN THE ARRAY AND JUST SET IT RATHER THAN USING THE ELEMENT\n}\n    }\n          /*  \n          if (this.editRecords[i].hours1 > 0) {\n\n            this.setOneChecked(i).then((result) => {\n              console.log('result: ' + JSON.stringify(result))\n              this.tempElement = result;\n              this.tempElement[0].checked = true\n            });\n          } \n        */\n\n  setAllCheckboxes(conference) {\n    console.log(\"pop default\")\n\n    const x = (<HTMLInputElement[]><any>document.getElementsByName('9'))\n    x[0].checked = true   \n\n    const y = (<HTMLInputElement[]><any>document.getElementsByName('8'))\n\n\n\n    this.getDocuments(conference).then(data => {\n      \n      if (data) {\n        var i = 0 // or one?\n        this.editRecords = data  \n        if (this.editRecords[2].hours1 > 0)\n        {\n          y[0].checked = true\n        }\n    \n\n        while (i <  this.editRecords.length) {\n\n          console.log('this.editRecords[i].hours1:' + this.editRecords[i].hours1)\n\n          if (this.editRecords[i].hours1 > 0) {\n\n           console.log('this.editRecords[i].session:' + this.editRecords[i].session)\n\n           let tempInt = this.editRecords[i].session.toString()\n\n            //const x = <HTMLInputElement[]>(<any>document.getElementsByName(sessionId))\n\n           /*  this.editRecords[i].session */\n\n            //const x = (<HTMLInputElement[]><any>document.getElementsByName('5'))\n\n            var x = (<HTMLInputElement[]><any>document.getElementsByName(this.editRecords[i].session))\n            x[0].checked = true   \n \n           /*  console.log('hours1 ' + this.editRecords[i].hours1 )\n\n            console.log('x[0] ?:', x[0].checked + '|' + x[0].type)\n            \n            x[0].checked = true\n\n            console.log('x[0] ?:', x[0].checked + '|' + x[0].type)\n\n            console.log('calling SetOne ' + i); */\n            \n         /*    this.setOneChecked_try2(i).then((result) => {\n              const tempElement = result;\n              tempElement[0].checked = true\n          });  */\n\n        //    this.setOneChecked(i)\n\n       /*      const y = (<HTMLInputElement[]><any>document.getElementsByName(compareToSession))\n            if (y[0].checked === true) { \n              x[0].checked = false\n              alert(\"Only one session per time slot is permitted.\")\n            }\n */\n\n\n          }\ni++\n          // loop thru and where hours exist, set as checked?\n        }\n      }\n    })\n  }\n  \n  setOneChecked_try2(session) {\n    /*     const x = (<HTMLInputElement[]><any>document.getElementsByName(this.editRecords[4].session))\n          x[0].checked = true \n     */\n\n    (<HTMLInputElement[]><any>document.getElementsByName(this.editRecords[20].session))[0].checked = true\n\n    //return (<HTMLInputElement[]><any>document.getElementsByName(this.editRecords[20].session));\n\n       let obj : any = []; // STO\n/*        const x = (<HTMLInputElement[]><any>document.getElementsByName(this.editRecords[20].session));\n        //return await (<HTMLInputElement[]><any>document.getElementsByName(this.editRecords[session].session));\n        x[0].checked = true */\n\n        obj.push({\n          set : \"yep\"\n        })\n\n        return obj\n\n      }\n\n  async setOneChecked(session) {\n/*     const x = (<HTMLInputElement[]><any>document.getElementsByName(this.editRecords[4].session))\n      x[0].checked = true \n */\n//    const x = (<HTMLInputElement[]><any>document.getElementsByName(this.editRecords[20].session));\n    return await (<HTMLInputElement[]><any>document.getElementsByName(this.editRecords[session].session));\n //   x[0].checked = true\n\n            \n  }\n\n loadConferenceRecords(conference) {\n\n// CREATE THE ARRAY OF CHECKS IN HERE\n// RESOLVE ARRAY\n// SEND ARRAY TO FUNCTION THAT LOADS THE CHECKS\n\n    console.log(\"pop default\")  \n  \n    this.getDocuments(conference)\n    .then((data) =>\n    {\n      this.editRecords = data  \n\n      console.log('length: ' + this.editRecords.length)\n\n      console.log('show data on load: ', JSON.stringify(this.editRecords))\n\n\n\n      // loop thru and where hours exist, set as checked?\n    })\n   \n  // this.setAllCheckboxes(this.conferenceNameForQuery)\n\n  \n  }\n\n  /* \n  updateSession(checkFlag, sessionNum) {\n    // FLIP FLAGS, COUNT CREDITS AND GO TO REMOTE METHOD TO UPDATE THE SESSION\n    // UPDATES ANY SESSION ON THIS PAGE\n\n    if (sessionNum === 1) {\n      if (checkFlag === true) {\n        checkFlag = false;\n        this.totalCredits = this.totalCredits - 3;\n      } else {\n        if (this.session_2 === true)\n        {\n          this.displayConcurrentSessionsAlert(\"This session is concurrent with the optional course: Basic Life Support for Physicians.\");\n          return false;\n        }\n        checkFlag = true;\n        this.totalCredits = this.totalCredits + 3;\n      }\n      this.session_1 = checkFlag;\n    }\n    if (sessionNum === 2) {\n      if (checkFlag === true) {\n        checkFlag = false;\n        this.totalCredits = this.totalCredits - 3;\n      } else {\n        if (this.session_1 === true)\n        {\n          this.displayConcurrentSessionsAlert(\"This session is concurrent with the Opening Session.\");\n          return false;\n        }\n        checkFlag = true;\n        this.totalCredits = this.totalCredits + 3;\n      }\n      this.session_2 = checkFlag;\n    }\n    if (sessionNum === 3) {\n      if (checkFlag === true) {\n        checkFlag = false;\n        this.totalCredits = this.totalCredits - 5;\n      } else {\n        checkFlag = true;\n        this.totalCredits = this.totalCredits + 5;\n      }\n      this.session_3 = checkFlag;\n    }\n    if (sessionNum === 4) {\n      if (checkFlag === true) {\n        checkFlag = false;\n        this.totalCredits = this.totalCredits - 3;\n      } else {\n        checkFlag = true;\n        this.totalCredits = this.totalCredits + 3;\n      }\n      this.session_4 = checkFlag;\n    }\n\n    console.log(\"session 3: \" + this.session_3);\n\n    this.confProv.updateConferenceSession(checkFlag, sessionNum);\n\n  }\n\n\n  displayConcurrentSessionsAlert(title      : string) : void\n{\nlet alert : any     = this._ALERT.create({\ntitle      : title,\nbuttons    : [{\ntext      : \"Got It!\"\n}]\n  updateSession(checkFlag, sessionNum) {\n    // FLIP FLAGS, COUNT CREDITS AND GO TO REMOTE METHOD TO UPDATE THE SESSION\n    // UPDATES ANY SESSION ON THIS PAGE\n\n    if (sessionNum === 1) {\n      if (checkFlag === true) {\n        checkFlag = false;\n        this.totalCredits = this.totalCredits - 3;\n      } else {\n        if (this.session_2 === true)\n        {\n          this.displayConcurrentSessionsAlert(\"This session is concurrent with the optional course: Basic Life Support for Physicians.\");\n          return false;\n        }\n        checkFlag = true;\n        this.totalCredits = this.totalCredits + 3;\n      }\n      this.session_1 = checkFlag;\n    }\n    if (sessionNum === 2) {\n      if (checkFlag === true) {\n        checkFlag = false;\n        this.totalCredits = this.totalCredits - 3;\n      } else {\n        if (this.session_1 === true)\n        {\n          this.displayConcurrentSessionsAlert(\"This session is concurrent with the Opening Session.\");\n          return false;\n        }\n        checkFlag = true;\n        this.totalCredits = this.totalCredits + 3;\n      }\n      this.session_2 = checkFlag;\n    }\n    if (sessionNum === 3) {\n      if (checkFlag === true) {\n        checkFlag = false;\n        this.totalCredits = this.totalCredits - 5;\n      } else {\n        checkFlag = true;\n        this.totalCredits = this.totalCredits + 5;\n      }\n      this.session_3 = checkFlag;\n    }\n    if (sessionNum === 4) {\n      if (checkFlag === true) {\n        checkFlag = false;\n        this.totalCredits = this.totalCredits - 3;\n      } else {\n        checkFlag = true;\n        this.totalCredits = this.totalCredits + 3;\n      }\n      this.session_4 = checkFlag;\n    }\n\n    console.log(\"session 3: \" + this.session_3);\n\n    this.confProv.updateConferenceSession(checkFlag, sessionNum);\n\n  }\n\n\n  displayConcurrentSessionsAlert(title      : string) : void\n{\nlet alert : any     = this._ALERT.create({\ntitle      : title,\nbuttons    : [{\ntext      : \"Got It!\"\n}]\n});\nalert.present();\n}\n\n});\nalert.present();\n}\n */\n  \n\n\n // TODO: BUILD OUT FULL FORM AGAIN, ADD ALL SESSION PAIRS - THEN LOOK AT A WAY TO PULL IN THE SESSION PAIRS FROM A DATASOURCE\n // TODO: LOOP THROUGH RECORDS ON LOAD TO SHOW CHECKED OR NOT\nfindPairedSession(incomingSession) {\n\n  console.log('incomingSession to findPairedSession: ' + incomingSession);\n\n /*  switch(variable_expression) { \n    case constant_expr1: { \n       //statements; \n       break; \n    } \n    case constant_expr2: { \n       //statements; \n       break; \n    } \n    default: { \n       //statements; \n       break; \n    } \n } \n */\n  switch(incomingSession) {\n    /* case 4: {\n      return 5;\n    }\n    case 5: {\n      return 4;      \n    }\n    case 6: {\n      return 7;\n    } \n    case 7: {\n      return 6; }    \n\n      case 8: {\n      return 9; }\n    case 9: {\n      return 8; }    \n\n      case 10: {\n      return 11; }\n    case 11: {\n      return 10; }    \n\n      case 12: {\n      return 13; }\n    case 13: {\n      return 12; }    \n\n      case 14: {\n      return 15; }\n    case 15: {\n      return 14; }     */\n\n      case 18: {\n      return 19; }\n    case 19: {\n      return 18; }    \n\n      case 20: {\n        return 21; }\n      case 21: {\n        return 20; }          \n\n      case 22: {\n      return 23; }\n    case 23: {\n      return 22; }    \n\n\n\n/*       case 23: {\n      return 24; }\n    case 24: {\n      return 23; }    \n\n      case 25: {\n      return 26; }\n    case 26: {\n      return 25; }    \n\n      case 27: {\n      return 28; }\n\t  \n    case 28: { \n      return 27; } */  \n\n    default: {\n      console.log('in switch default')\n      return 0;\n    }\n  }\n\n}\n\ngetColor(sessionId)\n{\n  console.log(\"sessionId in getColor: \" + sessionId)\n//  const pairedListForColor = \"5,6,8,9\"\n\n  if (sessionId === 18 || sessionId === 19)\n  {\n    return \"#d1d1e0\"\n  }\n  if (sessionId === 20 || sessionId === 21)\n  {\n    return \"#a4a4c1\"\n  }\n  if (sessionId === 22 || sessionId === 23)\n  {\n    return \"#d1d1e0\"\n  }\n  \n/*   if (pairedListForColor.indexOf(sessionId)) {\n    return \"gray\" \n  } */\n}\n\nconcurrentCheck(sessionId) {\n\nconsole.log(\"concurrentCheck\" + sessionId)\n\n//var script = (<HTMLScriptElement[]><any>document.getElementsByName(sessionId))[0];\n  const x = (<HTMLInputElement[]><any>document.getElementsByName(sessionId))\n\n//  if (x[0].type.toLowerCase() == \"checkbox\") { \n  if (x[0].checked === true) { \n    console.log(\"concurrentCheck x:\" + x[0].checked) //[0].checked)  \n    // a session was clicked, so go get paired session\n    const compareToSession = this.findPairedSession(sessionId).toString()\n    console.log(\"result from findPairedSession:\" + compareToSession)\n\n    if (compareToSession !== \"0\") {\n  const y = (<HTMLInputElement[]><any>document.getElementsByName(compareToSession))\n      if (y[0].checked === true) { \n        x[0].checked = false\n        this.displayAlert(\"You are trying to select Concurrent Sessions\",\"Please uncheck the conflicing session and then make your choice again.\")\n      }\n  }\n    \n  }  else {\n    console.log(\"not checked\")\n  }\n\n\n\n\n\n\n\n  \n  // *** SRK - 6/6/19 - THE ABOVE RETURNS CHECKED AS THE TYPE, BUT THEN RETURNS .CHECKED AS UNDEFINED\n\n\n/*   pass in session id as the same as the name id\n\n  sessionID can let us know if we need to check that another record is not already checked\n\n  but how can we get the state of another item if we don\"t know the id? Name?\n\n  check value by id\n  if this is 4 and 5 is checked - show message and return false\n */\n}\n\ndecryptString(incomingEncryptedString) {\n  var bytes_enc_string = CryptoJS.AES.decrypt(\n    incomingEncryptedString.toString(),\n    this.clientCypher\n  );\n\n  return bytes_enc_string.toString(CryptoJS.enc.Utf8);\n}\n\n    getDocuments(conference) : Promise<any> {\n  \n      console.log(\"getDocs\")\n      console.log(\"conference: \", conference)\n      console.log(\"this._COLL: \", this._COLL)\n\n      //const testUserNum = \"9999999998\"\n\n      var de_enc_user = this.decryptString(this.cookieService.get(\"tokenFB_Num\"));\n      var attestUser = de_enc_user\n\n      if (this.cookieService.get('tokenTOMAAdmin')) {   \n        this.isAdmin = true;\n      }\n\n      if (this.isAdmin) {\n\n        attestUser = \"9999999998\"\n      }\n\n\n      var checked : boolean\n  \n       return new Promise((resolve, reject) => {\n  \n        var query = this._DB.collection(this._COLL);\n        query = query.where(\"conference\", \"==\", conference)\n        query = query.where(\"aoa_number\", \"==\", attestUser)\n        query = query.orderBy(\"session\")\n        query.get().then((querySnapshot) => { // QUERY EXAMPLES citiesRef.where(\"population\", \">\", 100000).orderBy(\"population\").limit(2)\n  \n          let obj: any = [] // STORE RETRIEVED DOCUMENTS\n  \n          querySnapshot\n            .forEach((doc: any) => {\n  \n              const session = doc.data().session\n              const hours1 = doc.data().hours1\n              const hours_approved1 = doc.data().hours_approved1\n              if (hours_approved1 > 0) {\n                checked = true\n              } else {\n                checked = false\n              }\n              const timestamp2 = doc.data().ce_date\n              const ce_date_from_timestamp2 = timestamp2.toDate()\n              const formatted_date_entered = this.datepipe.transform(ce_date_from_timestamp2, \"yyyy-MM-dd\")\n              console.log('session: ' + session)  \n              console.log('time: ' + doc.data().other)  \n              console.log('description ' + doc.data().description)\n              console.log(\"hours1: \" + hours1)\n              console.log(\"hours_approved1: \" + hours_approved1)\n              console.log(\"session: \" + session)\n              obj.push({\n                id: doc.id,\n                session: session,\n                courseCredit: hours1,\n                checked: checked,\n                ce_date: formatted_date_entered,\n                time: doc.data().other,\n                description: doc.data().description,\n                accreditor: doc.data().accreditor\n              })\n  \n            })\n  \n  \n  \n          //console.log(\"end of getdocs5: \" + obj.length + \"returned\");\n          resolve(obj); // SEND BACK THE ARRAY OF OBJECTS\n  \n        })\n          .catch((error: any) => {\n            //console.log(\"error for insufficient priveledges coming from here\");\n            reject(error);\n          })\n  \n      })\n  \n    }\n\n    saveNotice(eVent): void {\n\n   /*     const x = (<HTMLInputElement[]><any>document.getElementsByName(this.editRecords[4].session))\n      x[0].checked = true    */\n\n      console.log(\"event:\", JSON.stringify(eVent))\n  \n      //const inputValue2 = (<HTMLInputElement>document.getElementById(\"blue\")).value;\n  \n      var elements = (<HTMLFormElement>document.getElementById(\"dynamicConference\")).elements;\n  \n      for (var i = 0, element; element = elements[i++];) {\n        console.log(\"looping elements:\", element.id + \" \" + element.type + \" \" + element.value)\n          if (element.type === \"checkbox\" && element.value !== \"\") {\n              console.log(\"value: \" + element.value)\n              if (element.checked === true){\n              this.updateDoc(\"irrelevant\", element.id, {hours_approved1: element.value})\n              this.updateDoc(\"irrelevant\", element.id, {approval: 'Yes'})\n              } else {\n              this.updateDoc(\"irrelevant\", element.id, {hours_approved1: 0})\n              this.updateDoc(\"irrelevant\", element.id, {approval: ''})\n              } \n          }\n      }\n\n      this.displayAlert(\"Saving Conference Attestation records...\",\"\")\n  \n    }\n\n    updateDoc(collectionObj: string,\n      docID: string,\n      dataObj: any): Promise<any> {\n      return new Promise((resolve, reject) => {\n        this._DB\n          .collection(this._COLL)\n          .doc(docID)\n          .update(dataObj)\n          .then((obj: any) => {\n            resolve(obj);\n          })\n          .catch((error: any) => {\n            reject(error);\n          });\n      });\n\n    }\n \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/attest/attest.ts"]}