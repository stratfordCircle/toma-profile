<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>org.txosteo.tomaprofile documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">org.txosteo.tomaprofile documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search">
</div>
            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li>DatabaseProvider</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/providers/database/database.ts</code>
        </p>



            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_DB">_DB</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#datepipe">datepipe</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#http">http</a>
                            </li>
                            <li>
                                <a href="#lastVisible">lastVisible</a>
                            </li>
                            <li>
                                <a href="#openRecords">openRecords</a>
                            </li>
                            <li>
                                <a href="#searchCriteria">searchCriteria</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#srk">srk</a>
                            </li>
                            <li>
                                <a href="#totalCredits">totalCredits</a>
                            </li>
                            <li>
                                <a href="#totalCreditsPerRecord">totalCreditsPerRecord</a>
                            </li>
                            <li>
                                <a href="#totalCreditsPerRecordApproved">totalCreditsPerRecordApproved</a>
                            </li>
                            <li>
                                <a href="#totals_1A">totals_1A</a>
                            </li>
                            <li>
                                <a href="#totals_All">totals_All</a>
                            </li>
                            <li>
                                <a href="#totals_CA">totals_CA</a>
                            </li>
                            <li>
                                <a href="#totals_ME_1A">totals_ME_1A</a>
                            </li>
                            <li>
                                <a href="#totals_OP">totals_OP</a>
                            </li>
                            <li>
                                <a href="#totals_Other">totals_Other</a>
                            </li>
                            <li>
                                <a href="#totals_RM_1A">totals_RM_1A</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#addDocument">addDocument</a>
                            </li>
                            <li>
                                <a href="#createAndPopulateDocument">createAndPopulateDocument</a>
                            </li>
                            <li>
                                <a href="#deleteDocument">deleteDocument</a>
                            </li>
                            <li>
                                <a href="#getDocsLength">getDocsLength</a>
                            </li>
                            <li>
                                <a href="#getDocuments">getDocuments</a>
                            </li>
                            <li>
                                <a href="#runBackUpBatches">runBackUpBatches</a>
                            </li>
                            <li>
                                <a href="#saveTextAsFile">saveTextAsFile</a>
                            </li>
                            <li>
                                <a href="#updateDocument">updateDocument</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(http: <a href="https://angular.io/api/http/Http" target="_blank">Http</a>, cookieService: CookieService, datepipe: <a href="https://angular.io/api/common/DatePipe" target="_blank">DatePipe</a>, srk: <a href="../injectables/SrkServicesProvider.html">SrkServicesProvider</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="40" class="link-to-prism">src/providers/database/database.ts:40</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>http</td>
                                                  
                                                        <td>
                                                                    <code><a href="https://angular.io/api/http/Http" target="_blank" >Http</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>cookieService</td>
                                                  
                                                        <td>
                                                                    <code>CookieService</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>datepipe</td>
                                                  
                                                        <td>
                                                                    <code><a href="https://angular.io/api/common/DatePipe" target="_blank" >DatePipe</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>srk</td>
                                                  
                                                        <td>
                                                                    <code><a href="../injectables/SrkServicesProvider.html" target="_self" >SrkServicesProvider</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
        <h3 id="methods">
            Methods
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="addDocument"></a>
                        <span class="name">
                            <b>
                            addDocument
                            </b>
                            <a href="#addDocument"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>addDocument(collectionObj: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, dataObj: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="689" class="link-to-prism">src/providers/database/database.ts:689</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Add a new document to a selected database collection</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>collectionObj</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><p>The database collection we want to add a new document to</p>
</code>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>dataObj</td>
                                                        <td>
                                                                    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="createAndPopulateDocument"></a>
                        <span class="name">
                            <b>
                            createAndPopulateDocument
                            </b>
                            <a href="#createAndPopulateDocument"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>createAndPopulateDocument(collectionObj: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, docID: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, dataObj: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="102" class="link-to-prism">src/providers/database/database.ts:102</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Create the database collection and defines an initial document
Note the use of merge : true flag within the returned promise  - this
is needed to ensure that the collection is not repeatedly recreated should
this method be called again (we DON&#39;T want to overwrite our documents!)</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>collectionObj</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><p>The database collection we want to create</p>
</code>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>docID</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><p>The document ID</p>
</code>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>dataObj</td>
                                                        <td>
                                                                    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><p>The document key/values to be added</p>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="deleteDocument"></a>
                        <span class="name">
                            <b>
                            deleteDocument
                            </b>
                            <a href="#deleteDocument"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>deleteDocument(collectionObj: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, docID: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="713" class="link-to-prism">src/providers/database/database.ts:713</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Delete an existing document from a selected database collection</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>collectionObj</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><p>The database collection we want to delete a document from</p>
</code>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>docID</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="getDocsLength"></a>
                        <span class="name">
                            <b>
                            getDocsLength
                            </b>
                            <a href="#getDocsLength"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>getDocsLength(collectionObj: )</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="123" class="link-to-prism">src/providers/database/database.ts:123</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>collectionObj</td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="getDocuments"></a>
                        <span class="name">
                            <b>
                            getDocuments
                            </b>
                            <a href="#getDocuments"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>getDocuments(collectionObj: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, searchCriteria: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, approvalSearchCriteria: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, start_date: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, end_date: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="268" class="link-to-prism">src/providers/database/database.ts:268</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Return documents from specific database collection</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>collectionObj</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><p>The database collection we want to retrieve records from</p>
</code>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>searchCriteria</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>approvalSearchCriteria</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>start_date</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>end_date</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="runBackUpBatches"></a>
                        <span class="name">
                            <b>
                            runBackUpBatches
                            </b>
                            <a href="#runBackUpBatches"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>runBackUpBatches(collectionObj: )</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="140" class="link-to-prism">src/providers/database/database.ts:140</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>collectionObj</td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="saveTextAsFile"></a>
                        <span class="name">
                            <b>
                            saveTextAsFile
                            </b>
                            <a href="#saveTextAsFile"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>saveTextAsFile(data: , filename: )</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="244" class="link-to-prism">src/providers/database/database.ts:244</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>data</td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                                <tr>
                                                        <td>filename</td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="updateDocument"></a>
                        <span class="name">
                            <b>
                            updateDocument
                            </b>
                            <a href="#updateDocument"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>updateDocument(collectionObj: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, docID: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, dataObj: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="743" class="link-to-prism">src/providers/database/database.ts:743</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Update an existing document within a selected database collection</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>collectionObj</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><p>The database collection to be used</p>
</code>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>docID</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><p>The document ID</p>
</code>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>dataObj</td>
                                                        <td>
                                                                    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><p>The document key/values to be updated</p>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>Promise&lt;any&gt;</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="_DB"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            _DB
                            </b>
                            <a href="#_DB"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>_DB:     <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="40" class="link-to-prism">src/providers/database/database.ts:40</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="datepipe"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            datepipe
                            </b>
                            <a href="#datepipe"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>datepipe:     <code><a href="https://angular.io/api/common/DatePipe" target="_blank" >DatePipe</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://angular.io/api/common/DatePipe" target="_blank" >DatePipe</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="44" class="link-to-prism">src/providers/database/database.ts:44</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="http"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            http
                            </b>
                            <a href="#http"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>http:     <code><a href="https://angular.io/api/http/Http" target="_blank" >Http</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://angular.io/api/http/Http" target="_blank" >Http</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="42" class="link-to-prism">src/providers/database/database.ts:42</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="lastVisible"></a>
                        <span class="name">
                            <b>
                            lastVisible
                            </b>
                            <a href="#lastVisible"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>lastVisible:     <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>[]</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="38" class="link-to-prism">src/providers/database/database.ts:38</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="openRecords"></a>
                        <span class="name">
                            <b>
                            openRecords
                            </b>
                            <a href="#openRecords"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>openRecords:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>0</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="29" class="link-to-prism">src/providers/database/database.ts:29</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="searchCriteria"></a>
                        <span class="name">
                            <b>
                            searchCriteria
                            </b>
                            <a href="#searchCriteria"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>searchCriteria:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>&quot;&quot;</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="37" class="link-to-prism">src/providers/database/database.ts:37</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="srk"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            srk
                            </b>
                            <a href="#srk"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>srk:     <code><a href="../injectables/SrkServicesProvider.html" target="_self" >SrkServicesProvider</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../injectables/SrkServicesProvider.html" target="_self" >SrkServicesProvider</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="45" class="link-to-prism">src/providers/database/database.ts:45</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="totalCredits"></a>
                        <span class="name">
                            <b>
                            totalCredits
                            </b>
                            <a href="#totalCredits"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>totalCredits:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>0</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="26" class="link-to-prism">src/providers/database/database.ts:26</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="totalCreditsPerRecord"></a>
                        <span class="name">
                            <b>
                            totalCreditsPerRecord
                            </b>
                            <a href="#totalCreditsPerRecord"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>totalCreditsPerRecord:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>0</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="27" class="link-to-prism">src/providers/database/database.ts:27</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="totalCreditsPerRecordApproved"></a>
                        <span class="name">
                            <b>
                            totalCreditsPerRecordApproved
                            </b>
                            <a href="#totalCreditsPerRecordApproved"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>totalCreditsPerRecordApproved:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>0</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="28" class="link-to-prism">src/providers/database/database.ts:28</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="totals_1A"></a>
                        <span class="name">
                            <b>
                            totals_1A
                            </b>
                            <a href="#totals_1A"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>totals_1A:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>0</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="30" class="link-to-prism">src/providers/database/database.ts:30</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="totals_All"></a>
                        <span class="name">
                            <b>
                            totals_All
                            </b>
                            <a href="#totals_All"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>totals_All:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>0</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="35" class="link-to-prism">src/providers/database/database.ts:35</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="totals_CA"></a>
                        <span class="name">
                            <b>
                            totals_CA
                            </b>
                            <a href="#totals_CA"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>totals_CA:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>0</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="33" class="link-to-prism">src/providers/database/database.ts:33</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="totals_ME_1A"></a>
                        <span class="name">
                            <b>
                            totals_ME_1A
                            </b>
                            <a href="#totals_ME_1A"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>totals_ME_1A:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>0</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="31" class="link-to-prism">src/providers/database/database.ts:31</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="totals_OP"></a>
                        <span class="name">
                            <b>
                            totals_OP
                            </b>
                            <a href="#totals_OP"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>totals_OP:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>0</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="34" class="link-to-prism">src/providers/database/database.ts:34</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="totals_Other"></a>
                        <span class="name">
                            <b>
                            totals_Other
                            </b>
                            <a href="#totals_Other"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>totals_Other:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>0</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="36" class="link-to-prism">src/providers/database/database.ts:36</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="totals_RM_1A"></a>
                        <span class="name">
                            <b>
                            totals_RM_1A
                            </b>
                            <a href="#totals_RM_1A"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>totals_RM_1A:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>0</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="32" class="link-to-prism">src/providers/database/database.ts:32</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { Http } from &#x27;@angular/http&#x27;;
import &#x27;rxjs/add/operator/map&#x27;;

// We MUST import both the firebase AND firestore modules like so
import * as firebase from &#x27;firebase&#x27;;
import &#x27;firebase/firestore&#x27;;
import { CookieService } from &#x27;ngx-cookie-service&#x27;;
import { DatePipe } from &#x27;@angular/common&#x27;;
import { SrkServicesProvider } from &#x27;../srk-services/srk-services&#x27;;
import { resolve } from &#x27;url&#x27;;

/* createAndPopulateDocument
getDocuments
addDocument
deleteDocument
updateDocument 
srk
*/



@Injectable()
export class DatabaseProvider {

    totalCredits : number &#x3D; 0;
    totalCreditsPerRecord : number &#x3D; 0;
    totalCreditsPerRecordApproved : number &#x3D; 0;
    openRecords : number &#x3D; 0;
    totals_1A : number &#x3D; 0;
    totals_ME_1A : number &#x3D; 0;
    totals_RM_1A : number &#x3D; 0;
    totals_CA : number &#x3D; 0;
    totals_OP : number &#x3D; 0;
    totals_All : number &#x3D; 0;
    totals_Other : number &#x3D; 0;
    searchCriteria : string &#x3D; &quot;&quot;;
    lastVisible : any &#x3D; [];

   private _DB : any;

   constructor(public http: Http, 
    private cookieService: CookieService, 
    public datepipe: DatePipe, 
    public srk: SrkServicesProvider) //private storage: Storage, 
   {
      this._DB &#x3D; firebase.firestore();
      const settings &#x3D; { timestampsInSnapshots: true }; //FIREBASE MADE A CHANGE TO READ TIMESTAMPS AS TIMESTAMPS INSTEAD OF AS SYSTEM DATE OBJECTS - THESE TWO LINES FORCE THE READ AS A TIMESTAMP TO PREPARE FOR THAT CHANGE WHEN FIREBASE IMPLEMENTS IT OR ELSE IT WOULD BE A BREAKING CHANGE
      this._DB.settings(settings);
   }
        
/* 
   FOR FIREBASE CHANGE - 
   constructor(public http: Http, 
    private cookieService: CookieService, 
    public datepipe: DatePipe, 
    public srk: SrkServicesProvider) //private storage: Storage, 
   {
      this._DB &#x3D; firebase.firestore();
      const settings &#x3D; { timestampsInSnapshots: true };
      this._DB.settings(settings);
   }
       
   FROM 
   [2018-08-22T17:06:49.036Z]  @firebase/firestore: Firestore (4.13.0): 
The behavior for Date objects stored in Firestore is going to change
AND YOUR APP MAY BREAK.
To hide this warning and ensure your app does not break, you need to add the
following code to your app before calling any other Cloud Firestore methods:

  const firestore &#x3D; firebase.firestore();
  const settings &#x3D; {/ your settings... / timestampsInSnapshots: true};
  firestore.settings(settings);

With this change, timestamps stored in Cloud Firestore will be read back as
Firebase Timestamp objects instead of as system Date objects. So you will also
need to update code expecting a Date to instead expect a Timestamp. For example:

  // Old:
  const date &#x3D; snapshot.get(&#x27;created_at&#x27;);
  // New:
  const timestamp &#x3D; snapshot.get(&#x27;created_at&#x27;);
  const date &#x3D; timestamp.toDate();

Please audit all existing usages of Date when you enable the new behavior. In a
future release, the behavior will change to the new behavior, so if you do not
follow these steps, YOUR APP MAY BREAK. */

  /** Create the database collection and defines an initial document
    * Note the use of merge : true flag within the returned promise  - this
    * is needed to ensure that the collection is not repeatedly recreated should
    * this method be called again (we DON&#x27;T want to overwrite our documents!)
    *
    * @public
    * @method createAndPopulateDocument
    * @param  collectionObj    {String}           The database collection we want to create
    * @param  docID            {String}           The document ID
    * @param  dataObj          {Any}              The document key/values to be added
    * @return {Promise}
    */

    createAndPopulateDocument(collectionObj : string,
                             docID         : string,
                             dataObj       : any) : Promise&lt;any&gt;
   {
      return new Promise((resolve, reject) &#x3D;&gt;
      {
         this._DB
         .collection(collectionObj)
         .doc(docID)
         .set(dataObj, { merge: true })
         .then((data : any) &#x3D;&gt;
         {
            resolve(data);
         })
         .catch((error : any) &#x3D;&gt;
         {
            reject(error);
         });
      });
   }

  getDocsLength(collectionObj) {
   
    return new Promise((resolve, reject) &#x3D;&gt;
    this._DB.collection(collectionObj)
    .get().then((documentSnapshots) &#x3D;&gt; { 
      let obj : any &#x3D; []; // STORE RETRIEVED DOCUMENTS
       var docsLength &#x3D; documentSnapshots.docs.length
       obj.push({
        numRecords : docsLength
       })
       resolve(obj)
   }
    )
    )

  }

runBackUpBatches(collectionObj) {
  
  var fileText: string &#x3D; &quot;&quot;;
  var fileName &#x3D; &quot;cmeExportssrk.csv&quot;;
  let fullFile: any &#x3D; [];
  var indexQuery
  var totalRecordsCounter: number &#x3D; 0;

          for(let i &#x3D; 0; i &lt;&#x3D; 4; i++){
            console.log(&#x27;PROMISE RETURNED?&#x27;)
             return new Promise((resolve, reject) &#x3D;&gt;
            { 
            if (i &#x3D;&#x3D;&#x3D; 0){
           
// SRK ALL OF THE COLLECTIONS ARE BEING CREATED BEFORE THE FIRST ONE IS COMPLETELY READ AND DOWNLOADED
// CAN ALSO CALL THIS FUNCTION INSIDE OF A PROMISE IN CME-PROCESSES?
// CAN BUILD THE ARRAY THEN BATCH THE OUTPUT
// MAYBE WRAP THIS IN A PROMISE AS IN GETDOCSLENGTH THEN CALL IT WITHIN A LOOP - SHOULD ONLY RETURN EACH TIME IT IS FINISHED?

           console.log(&quot;FIRST TIME&quot;)   
           indexQuery &#x3D; this._DB.collection(collectionObj)
           .where(&quot;aoa_number&quot;, &quot;&#x3D;&#x3D;&quot;, &#x27;9999999998&#x27;) 
           .orderBy(&quot;accreditor&quot;)
           //.startAt(this.lastVisible)
           .limit(100)
            } 
            else 
            {
              console.log(&quot;NEW LASTVISIBLE&quot;)
              indexQuery &#x3D; this._DB.collection(collectionObj)
              .where(&quot;aoa_number&quot;, &quot;&#x3D;&#x3D;&quot;, &#x27;9999999998&#x27;) 
              .orderBy(&quot;accreditor&quot;)
              .startAfter(this.lastVisible)
              .limit(100)
   
            }

           indexQuery
           .get().then((documentSnapshots) &#x3D;&gt; { 

            fileText &#x3D;
            &quot;CE Date&quot; + &#x27;, &#x27;
            &quot;Last Updated&quot; + &#x27;, &#x27; +
            &quot;description&quot; + &#x27;, &#x27; +
            &#x27;\n&#x27;;

            console.log(&quot;Batch Query: &quot; + i);
            let obj : any &#x3D; []; // STORE RETRIEVED DOCUMENTS
            documentSnapshots
            .forEach(element &#x3D;&gt;
            {
              
            totalRecordsCounter++  
            console.log(&#x27;doc.data().description:&#x27; + element.data().description);
 
            var formatted_ce_date &#x3D; this.datepipe.transform(element.ce_date, &#x27;yyyy-MM-dd&#x27;);
            //  let formatted_date_entered &#x3D; this.datepipe.transform(element.date_entered, &#x27;yyyy-MM-dd&#x27;);
            var formatted_date_created &#x3D; this.datepipe.transform(element.date_created, &#x27;yyyy-MM-dd&#x27;);
            var description &#x3D; element.data().description
            
            var id &#x3D; element.id

            fileText &#x3D; fileText +
            formatted_ce_date + &#x27;,&#x27; +
            description + &#x27;,&#x27; +
            id +
            //            formatted_date_created
            &#x27;\n&#x27;;

          fullFile.push({
            fileText
          });
              
            })

            console.log(&#x27;documentSnapshots.docs.length-1&#x27;, documentSnapshots.docs.length-1)
            this.lastVisible &#x3D; documentSnapshots.docs[99];
            console.log(&#x27;lastVisible:&#x27; + totalRecordsCounter +&#x27;/&#x27; + this.lastVisible) 
            console.log(&#x27;does this print after each batch?&#x27;)
            this.saveTextAsFile(fileText, fileName);
            
          })
          resolve()
        })
        }
          
/*             var nextIndexQuery &#x3D; this._DB.collection(collectionObj)
            //.orderBy(&quot;aoa_number&quot;)
            .startAt(lastVisible)
            .limit(10)
            .get().then((documentSnapshots2) &#x3D;&gt; { 

              let obj : any &#x3D; []; // STORE RETRIEVED DOCUMENTS
              documentSnapshots2
              .forEach((doc : any) &#x3D;&gt;
              {
                console.log(&quot;second batch query&quot;);
                console.log(&#x27;doc.data().description:&#x27; + doc.data().description);
                
              })

           }) */
}

saveTextAsFile(data, filename) {
  if (!data) {
    console.error(&quot;Console.save: No data&quot;);
    return;
  }

  if (!filename) filename &#x3D; &quot;console.json&quot;;
  var blob &#x3D; new Blob([data], { type: &quot;text/plain&quot; }),
    e &#x3D; document.createEvent(&quot;MouseEvents&quot;),
    a &#x3D; document.createElement(&quot;a&quot;);
  a.download &#x3D; filename;
  a.href &#x3D; window.URL.createObjectURL(blob);
  a.dataset.downloadurl &#x3D; [&quot;text/plain&quot;, a.download, a.href].join(&quot;:&quot;);
  e.initEvent(&quot;click&quot;, true, false);
  a.dispatchEvent(e);
}

  /** Return documents from specific database collection
    * @public
    * @method getDocuments
    * @param  collectionObj    {String}           The database collection we want to retrieve records from
    * @return {Promise}
    */

    getDocuments(collectionObj : string, searchCriteria : string, approvalSearchCriteria: string, start_date: string, end_date: string) : Promise&lt;any&gt;
   { 

// HOW ARE WE GETTING RESULTS WITHOUT EVER GETTING IN HERE?

//alert(&#x27;tt&#x27;)

    console.log(&#x27;*** export criteria ***&#x27;)
    console.log(&#x27;collectionObj &#x27;,collectionObj)
    console.log(&#x27;searchCriteria &#x27;,searchCriteria)
    console.log(&#x27;approvalSearchCriteria &#x27; + &#x27;|&#x27; +  approvalSearchCriteria + &#x27;|&#x27;)
    console.log(&#x27;start_date &#x27;,start_date)
    console.log(&#x27;end_date &#x27;,end_date)

    return new Promise((resolve, reject) &#x3D;&gt;
      {           

        let query &#x3D; this._DB.collection(collectionObj);

          if (start_date &#x3D;&#x3D;&#x3D; undefined || start_date &#x3D;&#x3D; &quot;All&quot; || start_date &#x3D;&#x3D; &quot;&quot; || !start_date) 
          {    }
          else {
          //let newStart_date &#x3D;  new Date(start_date); // newStart_date &#x3D;  new Date(newStart_date.getTime() - (3600000));

            let temp_start_date &#x3D; start_date.toLocaleString();
            let ce_startdate_localtime &#x3D; new Date(temp_start_date.replace(/-/g, &#x27;\/&#x27;));
            ce_startdate_localtime.setSeconds( ce_startdate_localtime.getSeconds() -1);
            console.log(&#x27;ce_date_localtime - start date &#x27;, ce_startdate_localtime);

          query &#x3D; query.where(&quot;ce_date&quot;, &quot;&gt;&quot;, ce_startdate_localtime); //new Date(newStart_date));
          }

          if (end_date &#x3D;&#x3D;&#x3D; undefined || end_date &#x3D;&#x3D; &quot;All&quot; || end_date &#x3D;&#x3D; &quot;&quot; || !end_date)
          {    }
          else {

            let temp_end_date &#x3D; end_date.toLocaleString();
            let ce_enddate_localtime &#x3D; new Date(temp_end_date.replace(/-/g, &#x27;\/&#x27;));
            ce_enddate_localtime.setSeconds( ce_enddate_localtime.getSeconds() +86399);
            console.log(&#x27;ce_date_localtime - end date &#x27;, ce_enddate_localtime);


          //let newEnd_date &#x3D;  new Date(end_date); // newEnd_date &#x3D;  new Date(newEnd_date.getTime() + (3600000));
          query &#x3D; query.where(&quot;ce_date&quot;, &quot;&lt;&quot;, ce_enddate_localtime);

          }
          
          // IF NO SEARCH CRITERIA AND USER IS NOT AN ADMIN, THEN DEFAULT SEARCH TO CURRENT MEMBER ID
          // IF NO SEARCH CRITERIA AND USER IS AN ADMIN, THEN LEAVE OUT THIS PART OF THE QUERY STRING
          //|| searchCriteria &#x3D;&#x3D; &quot;adminUser&quot; || !searchCriteria

          if (searchCriteria &#x3D;&#x3D;&#x3D; undefined || searchCriteria &#x3D;&#x3D;&#x3D; &quot;&quot; || !searchCriteria ){ //IF NO SEARCH CRITERIA, CHECK IF ADMIN  

            console.log(&#x27;no search criteria which is fine&#x27;)
              let cookieCheck &#x3D; this.cookieService.get(&#x27;tokenTOMAAdmin&#x27;);
              
              if (!cookieCheck)  { // IF NOT ADMIN, SEARCH ON CURRENT MEMBER ID ONLY
                console.log(&#x27;should not get in here: 1&#x27;)
                var enc_user &#x3D; this.cookieService.get(&#x27;tokenFB_Num&#x27;);      
                searchCriteria &#x3D; this.srk.decryptString(enc_user);

               console.log(&#x27;no admin cookie - but is there a user cookie yet?&#x27; + searchCriteria);
                query &#x3D; query.where(&quot;aoa_number&quot;, &quot;&#x3D;&#x3D;&quot;, searchCriteria);
              } else { // ADMIN WITH NO SEARCH CRITERIA
  //s              console.log(&#x27;admin with no search criteria&#x27;);
                console.log(&#x27;ADMIN WITH NO SEARCH CRITERIA&#x27;)
              }

             } 
            else { // IF SEARCH CRITERIA, MUST BE AN ADMIN
              query &#x3D; query.where(&quot;aoa_number&quot;, &quot;&#x3D;&#x3D;&quot;, searchCriteria); 
            }

           // if ((doc.data().approval &#x3D;&#x3D; &quot;&quot;) || (doc.data().approval &#x3D;&#x3D; &quot;Open&quot;)) {

        /*       if (approvalSearchCriteria &#x3D;&#x3D;&#x3D; &quot;Open&quot;)
          {  
            console.log(&#x27;Open&#x27;); // 166
            query &#x3D; query.where(&quot;approval&quot;, &quot;&#x3D;&#x3D;&quot;, &quot;&quot;);
            //query &#x3D; query.where(&quot;approval&quot;, &quot;&#x3D;&#x3D;&quot;, &quot;&quot;);
          } 
          else {
            query &#x3D; query.where(&quot;approval&quot;, &quot;&#x3D;&#x3D;&quot;, approvalSearchCriteria);
          } */
          
          if (approvalSearchCriteria &#x3D;&#x3D;&#x3D; &quot;All&quot; || approvalSearchCriteria &#x3D;&#x3D;&#x3D; undefined || !approvalSearchCriteria)
          {  
            query &#x3D; query.orderBy(&quot;ce_date&quot;, &quot;desc&quot;);
          //  console.log(&#x27;empty is coming in here&#x27;);
          } 
          else {
            query &#x3D; query.where(&quot;approval&quot;, &quot;&#x3D;&#x3D;&quot;, approvalSearchCriteria).orderBy(&quot;ce_date&quot;, &quot;desc&quot;);
          }

          // ANOTHER SEARCH - FOR CONFERENCE 
          if (this.cookieService.get(&#x27;conferenceCollectionCookie&#x27;)) {
            let tempConference &#x3D; this.cookieService.get(&#x27;conferenceCollectionCookie&#x27;)
            query &#x3D; query.where(&quot;conference&quot;, &quot;&#x3D;&#x3D;&quot;, tempConference); 
            this.cookieService.delete(&#x27;conferenceCollectionCookie&#x27;)
          }



           query &#x3D; query.get().then((querySnapshot) &#x3D;&gt; { // QUERY EXAMPLES citiesRef.where(&quot;population&quot;, &quot;&gt;&quot;, 100000).orderBy(&quot;population&quot;).limit(2)
            
            let obj : any &#x3D; []; // STORE RETRIEVED DOCUMENTS
            this.totalCredits &#x3D; 0;
            this.totalCreditsPerRecord &#x3D; 0;
            this.totalCreditsPerRecordApproved &#x3D; 0;
            this.totals_1A &#x3D; 0;
            this.totals_ME_1A &#x3D; 0;
            this.totals_RM_1A &#x3D; 0;
            this.totals_CA &#x3D; 0;
            this.totals_OP &#x3D; 0;
            this.totals_All &#x3D; 0;
            this.totals_Other &#x3D; 0;
            this.openRecords &#x3D; 0;

            querySnapshot
            .forEach((doc : any) &#x3D;&gt;
            {

              var credit_type1 &#x3D; doc.data().credit_type1;
              var credit_type2 &#x3D; doc.data().credit_type2;
              var credit_type3 &#x3D; doc.data().credit_type3;
              var hours1 &#x3D; 0;
              var hours2 &#x3D; 0;
              var hours3 &#x3D; 0;
              var hours_approved1 &#x3D; 0;
              var hours_approved2 &#x3D; 0;
              var hours_approved3 &#x3D; 0;

            //  console.log(&#x27;session number: &#x27; +  doc.data().session_number);

             if (!isNaN(parseFloat(doc.data().hours1))) {
              hours1 &#x3D;  parseFloat(doc.data().hours1);
             }
             if (!isNaN(parseFloat(doc.data().hours2))) {
              hours2 &#x3D; parseFloat(doc.data().hours2);
             }
             if (!isNaN(parseFloat(doc.data().hours3))) {
              hours3 &#x3D; parseFloat(doc.data().hours3);
             }
             if (!isNaN(parseFloat(doc.data().hours_approved1)) &amp;&amp; (doc.data().approval &#x3D;&#x3D; &quot;Yes&quot;)) {
              hours_approved1 &#x3D; parseFloat(doc.data().hours_approved1);
             } 
             if (!isNaN(parseFloat(doc.data().hours_approved2)) &amp;&amp; (doc.data().approval &#x3D;&#x3D; &quot;Yes&quot;)) {
              hours_approved2 &#x3D; parseFloat(doc.data().hours_approved2);
             } 
             if (!isNaN(parseFloat(doc.data().hours_approved3)) &amp;&amp; (doc.data().approval &#x3D;&#x3D; &quot;Yes&quot;)) {
              hours_approved3 &#x3D; parseFloat(doc.data().hours_approved3);
             }

              // CALCULATE Total CME Credits to Date &#x3D; 1A + PS_1A + CA_1A + OP_1A + 1B + PS_1B + CA_1B + OP_1B + 2A + PS_2A + CA_2A + OP_2A + 2B + PS_2B + CA_2B + OP_2B
              this.totalCreditsPerRecord &#x3D; hours1 + hours2 + hours3;
              this.totalCreditsPerRecordApproved &#x3D; hours_approved1 + hours_approved2 + hours_approved3;
              this.totalCredits &#x3D; this.totalCredits + this.totalCreditsPerRecordApproved;

/*            console.log(&#x27;credit_type1: &#x27;, credit_type1);              
              console.log(&#x27;credit_type2: &#x27;, credit_type2);              
              console.log(&#x27;credit_type3: &#x27;, credit_type3);              
              console.log(&#x27;totals_1A: &#x27;, this.totals_1A); */
              // CALCULATE Total Category 1A Credits to Date &#x3D; 1A + PS_1A + CA_1A + OP_1A         

              if ((credit_type1 &#x3D;&#x3D; &quot;1A&quot;) || (credit_type1 &#x3D;&#x3D; &quot;ME_1A&quot;) || (credit_type1 &#x3D;&#x3D; &quot;RM_1A&quot;) || (credit_type1 &#x3D;&#x3D; &quot;ME_1A, RM_1A&quot;))
              {
                this.totals_1A &#x3D; this.totals_1A + hours_approved1;
           //     console.log(&#x27;totals_1A:2 &#x27;, this.totals_1A);
              }
              if ((credit_type2 &#x3D;&#x3D; &quot;1A&quot;) || (credit_type2 &#x3D;&#x3D; &quot;ME_1A&quot;) || (credit_type2 &#x3D;&#x3D; &quot;RM_1A&quot;) || (credit_type2 &#x3D;&#x3D; &quot;ME_1A, RM_1A&quot;))
              {
                this.totals_1A &#x3D; this.totals_1A + hours_approved2;
/*              console.log(&#x27;credit_type2 totalling?: &#x27;, credit_type2);  
                console.log(&#x27;totals_1A:3 &#x27;, this.totals_1A); */
              }
              if ((credit_type3 &#x3D;&#x3D; &quot;1A&quot;) || (credit_type3 &#x3D;&#x3D; &quot;ME_1A&quot;) || (credit_type3 &#x3D;&#x3D; &quot;RM_1A&quot;) || (credit_type3 &#x3D;&#x3D; &quot;ME_1A, RM_1A&quot;))
              {
                this.totals_1A &#x3D; this.totals_1A + hours_approved3;
          //      console.log(&#x27;totals_1A:4 &#x27;, this.totals_1A);
              }

              if (credit_type1 &#x3D;&#x3D; &quot;ME_1A&quot;) 
              {
                this.totals_ME_1A &#x3D; this.totals_ME_1A + hours_approved1;
              }
              if (credit_type2 &#x3D;&#x3D; &quot;ME_1A&quot;) 
              {
                this.totals_ME_1A &#x3D; this.totals_ME_1A + hours_approved2;
              }
              if (credit_type3 &#x3D;&#x3D; &quot;ME_1A&quot;) 
              {
                this.totals_ME_1A &#x3D; this.totals_ME_1A + hours_approved3;
              }

              if (credit_type1 &#x3D;&#x3D; &quot;RM_1A&quot;) 
              {
                this.totals_RM_1A &#x3D; this.totals_RM_1A + hours_approved1;
              }
              if (credit_type2 &#x3D;&#x3D; &quot;RM_1A&quot;) 
              {
                this.totals_RM_1A &#x3D; this.totals_RM_1A + hours_approved2;
              }
              if (credit_type3 &#x3D;&#x3D; &quot;RM_1A&quot;) 
              {
                this.totals_RM_1A &#x3D; this.totals_RM_1A + hours_approved3;
              }

              if (credit_type1 &#x3D;&#x3D; &quot;ME_1A, RM_1A&quot;) 
              {
                this.totals_ME_1A &#x3D; this.totals_ME_1A + hours_approved1;
                this.totals_RM_1A &#x3D; this.totals_RM_1A + hours_approved1;
              }
              if (credit_type2 &#x3D;&#x3D; &quot;ME_1A, RM_1A&quot;) 
              {
                this.totals_ME_1A &#x3D; this.totals_ME_1A + hours_approved2;
                this.totals_RM_1A &#x3D; this.totals_RM_1A + hours_approved2;
              }
              if (credit_type3 &#x3D;&#x3D; &quot;ME_1A, RM_1A&quot;) 
              {
                this.totals_ME_1A &#x3D; this.totals_ME_1A + hours_approved3;
                this.totals_RM_1A &#x3D; this.totals_RM_1A + hours_approved3;
              }




          /*     if ((credit_type2 &#x3D;&#x3D; &quot;1A&quot;) || (credit_type2 &#x3D;&#x3D; &quot;ME_1A&quot;) || (credit_type2 &#x3D;&#x3D; &quot;RM_1A&quot;))
              {
                this.totals_1A &#x3D; this.totals_1A + hours_approved2;
              console.log(&#x27;credit_type2 totalling?: &#x27;, credit_type2);  
                console.log(&#x27;totals_1A:3 &#x27;, this.totals_1A); 
              }
              if ((credit_type3 &#x3D;&#x3D; &quot;1A&quot;) || (credit_type3 &#x3D;&#x3D; &quot;ME_1A&quot;) || (credit_type3 &#x3D;&#x3D; &quot;RM_1A&quot;))
              {
                this.totals_1A &#x3D; this.totals_1A + hours_approved3;
          //      console.log(&#x27;totals_1A:4 &#x27;, this.totals_1A);
              } */


              // console.log(&#x27;totals_1A:5 &#x27;, this.totals_1A);
              // CALCULATE Total Patient Safety Credits to Date &#x3D; PS_1A + PS_1B + PS_2A + PS_2B
              /* if ((credit_type1 &#x3D;&#x3D; &quot;PS_1A&quot;) || (credit_type1 &#x3D;&#x3D; &quot;PS_1B&quot;) || (credit_type1 &#x3D;&#x3D; &quot;PS_2A&quot;) || (credit_type1 &#x3D;&#x3D; &quot;PS_2B&quot;) || (credit_type1 &#x3D;&#x3D; &quot;1A_PS&quot;) || (credit_type1 &#x3D;&#x3D; &quot;1B_PS&quot;) || (credit_type1 &#x3D;&#x3D; &quot;2A_PS&quot;) || (credit_type1 &#x3D;&#x3D; &quot;2B_PS&quot;))
              {
                this.totals_PS &#x3D; this.totals_PS + hours_approved1;
              }
              if ((credit_type2 &#x3D;&#x3D; &quot;PS_1A&quot;) || (credit_type2 &#x3D;&#x3D; &quot;PS_1B&quot;) || (credit_type2 &#x3D;&#x3D; &quot;PS_2A&quot;) || (credit_type2 &#x3D;&#x3D; &quot;PS_2B&quot;) || (credit_type2 &#x3D;&#x3D; &quot;1A_PS&quot;) || (credit_type2 &#x3D;&#x3D; &quot;1B_PS&quot;) || (credit_type2 &#x3D;&#x3D; &quot;2A_PS&quot;) || (credit_type2 &#x3D;&#x3D; &quot;2B_PS&quot;))
              {
                this.totals_PS &#x3D; this.totals_PS + hours_approved2;
              }
              if ((credit_type3 &#x3D;&#x3D; &quot;PS_1A&quot;) || (credit_type3 &#x3D;&#x3D; &quot;PS_1B&quot;) || (credit_type3 &#x3D;&#x3D; &quot;PS_2A&quot;) || (credit_type3 &#x3D;&#x3D; &quot;PS_2B&quot;) || (credit_type3 &#x3D;&#x3D; &quot;1A_PS&quot;) || (credit_type3 &#x3D;&#x3D; &quot;1B_PS&quot;) || (credit_type3 &#x3D;&#x3D; &quot;2A_PS&quot;) || (credit_type3 &#x3D;&#x3D; &quot;2B_PS&quot;))
              {
                this.totals_PS &#x3D; this.totals_PS + hours_approved3;
              } */

              // CALCULATE Total Child Abuse Credits to Date &#x3D; CA_1A + CA_1B + CA_2A + CA_2B
              /* if ((credit_type1 &#x3D;&#x3D; &quot;CA_1A&quot;) || (credit_type1 &#x3D;&#x3D; &quot;CA_1B&quot;) || (credit_type1 &#x3D;&#x3D; &quot;CA_2A&quot;) || (credit_type1 &#x3D;&#x3D; &quot;CA_2B&quot;) || (credit_type1 &#x3D;&#x3D; &quot;1A_CA&quot;) || (credit_type1 &#x3D;&#x3D; &quot;1B_CA&quot;) || (credit_type1 &#x3D;&#x3D; &quot;2A_CA&quot;) || (credit_type1 &#x3D;&#x3D; &quot;2B_CA&quot;))
              {
                this.totals_CA &#x3D; this.totals_CA + hours_approved1;
              }
              if ((credit_type2 &#x3D;&#x3D; &quot;CA_1A&quot;) || (credit_type2 &#x3D;&#x3D; &quot;CA_1B&quot;) || (credit_type2 &#x3D;&#x3D; &quot;CA_2A&quot;) || (credit_type2 &#x3D;&#x3D; &quot;CA_2B&quot;) || (credit_type2 &#x3D;&#x3D; &quot;1A_CA&quot;) || (credit_type2 &#x3D;&#x3D; &quot;1B_CA&quot;) || (credit_type2 &#x3D;&#x3D; &quot;2A_CA&quot;) || (credit_type2 &#x3D;&#x3D; &quot;2B_CA&quot;))
              {
                this.totals_CA &#x3D; this.totals_CA + hours_approved2;
              }
              if ((credit_type3 &#x3D;&#x3D; &quot;CA_1A&quot;) || (credit_type3 &#x3D;&#x3D; &quot;CA_1B&quot;) || (credit_type3 &#x3D;&#x3D; &quot;CA_2A&quot;) || (credit_type3 &#x3D;&#x3D; &quot;CA_2B&quot;) || (credit_type3 &#x3D;&#x3D; &quot;1A_CA&quot;) || (credit_type3 &#x3D;&#x3D; &quot;1B_CA&quot;) || (credit_type3 &#x3D;&#x3D; &quot;2A_CA&quot;) || (credit_type3 &#x3D;&#x3D; &quot;2B_CA&quot;))
              {
                this.totals_CA &#x3D; this.totals_CA + hours_approved3;
              } */

              // CALCULATE Total Opioid Credits to Date &#x3D; OP_1A + OP_1B + OP_2A + OP_2B
              /* if ((credit_type1 &#x3D;&#x3D; &quot;OP_1A&quot;) || (credit_type1 &#x3D;&#x3D; &quot;OP_1B&quot;) || (credit_type1 &#x3D;&#x3D; &quot;OP_2A&quot;) || (credit_type1 &#x3D;&#x3D; &quot;OP_2B&quot;) || (credit_type1 &#x3D;&#x3D; &quot;1A_OP&quot;) || (credit_type1 &#x3D;&#x3D; &quot;1B_OP&quot;) || (credit_type1 &#x3D;&#x3D; &quot;2A_OP&quot;) || (credit_type1 &#x3D;&#x3D; &quot;2B_OP&quot;))
              {
                this.totals_OP &#x3D; this.totals_OP + hours_approved1;
              }
              if ((credit_type2 &#x3D;&#x3D; &quot;OP_1A&quot;) || (credit_type2 &#x3D;&#x3D; &quot;OP_1B&quot;) || (credit_type2 &#x3D;&#x3D; &quot;OP_2A&quot;) || (credit_type2 &#x3D;&#x3D; &quot;OP_2B&quot;) || (credit_type2 &#x3D;&#x3D; &quot;1A_OP&quot;) || (credit_type2 &#x3D;&#x3D; &quot;1B_OP&quot;) || (credit_type2 &#x3D;&#x3D; &quot;2A_OP&quot;) || (credit_type2 &#x3D;&#x3D; &quot;2B_OP&quot;))
              {
                this.totals_OP &#x3D; this.totals_OP + hours_approved2;
              }
              if ((credit_type3 &#x3D;&#x3D; &quot;OP_1A&quot;) || (credit_type1 &#x3D;&#x3D; &quot;OP_1B&quot;) || (credit_type3 &#x3D;&#x3D; &quot;OP_2A&quot;) || (credit_type3 &#x3D;&#x3D; &quot;OP_2B&quot;) || (credit_type3 &#x3D;&#x3D; &quot;1A_OP&quot;) || (credit_type3 &#x3D;&#x3D; &quot;1B_OP&quot;) || (credit_type3 &#x3D;&#x3D; &quot;2A_OP&quot;) || (credit_type3 &#x3D;&#x3D; &quot;2B_OP&quot;))
              {
                this.totals_OP &#x3D; this.totals_OP + hours_approved3;
              }
 */
              // CALCULATE &quot;Other&quot; Credits to Date &#x3D; 1B + 2A + 2B + Other
              if ((credit_type1 &#x3D;&#x3D; &quot;1B&quot;) || (credit_type1 &#x3D;&#x3D; &quot;2A&quot;) || (credit_type1 &#x3D;&#x3D; &quot;2B&quot;) || (credit_type1 &#x3D;&#x3D; &quot;Other&quot;))
              {
                this.totals_Other &#x3D; this.totals_Other + hours_approved1;
              }
              if ((credit_type2 &#x3D;&#x3D; &quot;1B&quot;) || (credit_type2 &#x3D;&#x3D; &quot;2A&quot;) || (credit_type2 &#x3D;&#x3D; &quot;2B&quot;) || (credit_type2 &#x3D;&#x3D; &quot;Other&quot;))
              {
                this.totals_Other &#x3D; this.totals_Other + hours_approved2;
              }
              if ((credit_type3 &#x3D;&#x3D; &quot;1B&quot;) || (credit_type3 &#x3D;&#x3D; &quot;2A&quot;) || (credit_type3 &#x3D;&#x3D; &quot;2B&quot;) || (credit_type3 &#x3D;&#x3D; &quot;Other&quot;))
              {
                this.totals_Other &#x3D; this.totals_Other + hours_approved3;
              }

              if ((doc.data().approval &#x3D;&#x3D; &quot;&quot;) || (doc.data().approval &#x3D;&#x3D; &quot;Open&quot;)) {
                this.openRecords++;
              }

              let credit_multi &#x3D; credit_type1; // + &#x27;,&#x27; + credit_type2 + &#x27;,&#x27; + credit_type3;

              if (credit_type2 !&#x3D;&#x3D; undefined &amp;&amp; credit_type2.length &gt; 0 )
              {
                credit_multi &#x3D; credit_type1 + &#x27;, &#x27; + credit_type2; 
              }

              if (credit_type3 !&#x3D;&#x3D; undefined &amp;&amp; credit_type3.length &gt; 0 )
              {
                credit_multi &#x3D; credit_type1 + &#x27;, &#x27; + credit_type2 + &#x27;, &#x27; + credit_type3;
              }
              
              // THE SECOND HALF OF THE FIRESTORE TIMESTAMP CHANGES PREP - NEEDED TO ACCOUNT FOR FIREBASE TIMESTAMP CHANGE HERE BECAUSE DATEPIPE EXPECTS A DATE AND NOT A TIMESTAMP - WE&#x27;VE BEEN STORING TIMESTAMPS AND FIREBASE HAS BEEN READING THEM BACK AS DATES SO WE DIDN&#x27;T NEED TO DO THIS BEFORE
              const timestamp &#x3D; doc.data().ce_date;
              const ce_date_from_timestamp &#x3D; timestamp.toDate();
              let formatted_ce_date &#x3D;this.datepipe.transform(ce_date_from_timestamp, &#x27;yyyy-MM-dd&#x27;); 

              const timestamp2 &#x3D; doc.data().date_entered;
              const ce_date_from_timestamp2 &#x3D; timestamp2.toDate();
              let formatted_date_entered &#x3D; this.datepipe.transform(ce_date_from_timestamp2, &#x27;yyyy-MM-dd&#x27;); 

              const timestamp3 &#x3D; doc.data().date_created;
              const ce_date_from_timestamp3 &#x3D; timestamp3.toDate();
              let formatted_date_created &#x3D; this.datepipe.transform(ce_date_from_timestamp3, &#x27;yyyy-MM-dd&#x27;); 



              let presentation_doc_exists &#x3D; &quot;No&quot;;
              if (doc.data().supporting_doc !&#x3D; &#x27;&#x27;) {
                presentation_doc_exists &#x3D; &quot;Yes&quot;;
              }
              let newdescription &#x3D; &#x27;&#x27;;
              let tempdescription &#x3D; doc.data().description
//              console.log(&#x27;tempdescription &#x27; + tempdescription);


              if (doc.data().conference &#x3D;&#x3D; &#x27;TOMA/TXACOFP 12th Annual Convention&#x27;) { // ONE TIME EXCEPTION FOR THE RECORDS THAT HAD THE DATE/TIME INCORPORTED INTO THE DESCRIPTION
                console.log(&#x27;from conference with dates: &#x27; + tempdescription.substring(tempdescription.split(&#x27;-&#x27;, 2).join(&#x27;-&#x27;).length + 1))
              newdescription &#x3D; tempdescription.substring(tempdescription.split(&#x27;-&#x27;, 2).join(&#x27;-&#x27;).length + 1)
              } else
              {
              newdescription &#x3D; doc.data().description;
              console.log(&#x27;all other records &#x27; + newdescription);
              }




//            alert(&#x27;doc.data().aoa_number&#x27; + doc.data().aoa_number)

              //if findNoCase()
/*            var updateList &#x3D; &quot;1,025983,027881,028540,028588,028920,028984,029089,029173,029722,029988,030017,030294,032097,032214,032452,032679,032963,033093,033129,033872,033881,034716,035393,035399,035431,035992,036357,037325,037957,037963,037964,037994,038143,038469,038473,038666,039657,039808,040114,040213,040214,040256,040442,040631,041000,041931,042164,042289,042544,043607,044752,044758,044761,044765,044766,044767,044809,046396,046748,047308,048221,048801,051587,051614,054954,056596,058275,058285,059952,060753,061061,061837,062084,062137,065223,067054,070438,071099,073097,084853,085188,0161401,0166033,0166049,0178171&quot;

              if (updateList.indexOf(doc.data().aoa_number) &gt; 0) { */

                //alert(&#x27;updateList: &#x27; + doc.data().aoa_number)

              obj.push({
                id                    : doc.id,
                ce_date               : formatted_ce_date, //doc.data().ce_date,
                date_entered          : formatted_date_entered,
                accreditor            : doc.data().accreditor,
                session               : doc.data().session,
                conference            : doc.data().conference,
                credit_type1          : doc.data().credit_type1,
                hours1                : doc.data().hours1,
                hours_approved1       : doc.data().hours_approved1,
                credit_type2          : doc.data().credit_type2,
                hours2                : doc.data().hours2,
                hours_approved2       : doc.data().hours_approved2,
                credit_type3          : doc.data().credit_type3,
                hours3                : doc.data().hours3,
                hours_approved3       : doc.data().hours_approved3,
                hours_total           : this.totalCreditsPerRecord,
                hours_total_approved  : this.totalCreditsPerRecordApproved,
                description           : newdescription, // doc.data().description,
                member_id             : doc.data().member_id,
                aoa_number            : doc.data().aoa_number,
                approval              : doc.data().approval,
                approval_reason       : doc.data().approval_reason,
                supporting_doc        : doc.data().supporting_doc,
                doc_exists            : presentation_doc_exists,
                created_by            : doc.data().created_by,
                created_by_process    : doc.data().created_by_process,
                date_created          : formatted_date_created, //doc.data().date_created, // BECOMES LAST_UPDATED AS THIS IS UPDATED EACH TIME THE RECORD IS UPDATED
                totals_1A             : this.totals_1A,
                totals_ME_1A          : this.totals_ME_1A, 
                totals_RM_1A          : this.totals_RM_1A,
                totals_CA             : this.totals_CA,
                totals_OP             : this.totals_OP,
                totals_Other          : this.totals_Other,
                openRecords           : this.openRecords,
                totalCredits          : this.totalCredits,
                credit_multi          : credit_multi
              });

            //}

            });

            console.log(&#x27;end of getdocs5: &#x27; + obj.length + &#x27;returned&#x27;);
            resolve(obj); // SEND BACK THE ARRAY OF OBJECTS

         })
         .catch((error : any) &#x3D;&gt;
         {
           console.log(&#x27;error for insufficient priviledges coming from here&#x27;);
            reject(error);
         });

      }); // END OF RETURN PROMISE
   }

    /** Add a new document to a selected database collection
      * @public
      * @method addDocument
      * @param  collectionObj    {String}           The database collection we want to add a new document to
      * @param  docObj           {Any}              The key/value object we want to add
      * @return {Promise}
    */
    
   addDocument(collectionObj : string,
             dataObj       : any) : Promise&lt;any&gt;
   {
      return new Promise((resolve, reject) &#x3D;&gt;
      {
         this._DB.collection(collectionObj).add(dataObj)
         .then((obj : any) &#x3D;&gt;
         {
            resolve(obj);
         })
         .catch((error : any) &#x3D;&gt;
         {
            reject(error);
         });
      });
   }

  /** Delete an existing document from a selected database collection
    * @public
    * @method deleteDocument
    * @param  collectionObj    {String}           The database collection we want to delete a document from
    * @param  docObj           {Any}              The document we wish to delete
    * @return {Promise}
  */
   deleteDocument(collectionObj : string,
                docID         : string) : Promise&lt;any&gt;
   {
      return new Promise((resolve, reject) &#x3D;&gt;
      {
         this._DB
         .collection(collectionObj)
         .doc(docID)
         .delete()
         .then((obj : any) &#x3D;&gt;
         {
            resolve(obj);
         })
         .catch((error : any) &#x3D;&gt;
         {
            reject(error);
         });
      });
   }



   /** Update an existing document within a selected database collection
    * @public
    * @method updateDocument
    * @param  collectionObj    {String}           The database collection to be used
    * @param  docID            {String}           The document ID
    * @param  dataObj          {Any}              The document key/values to be updated
    * @return {Promise}
    */
   updateDocument(collectionObj : string,
                docID         : string,
                dataObj       : any) : Promise&lt;any&gt;
   {
      return new Promise((resolve, reject) &#x3D;&gt;
      {
         this._DB
         .collection(collectionObj)
         .doc(docID)
         .update(dataObj)
         .then((obj : any) &#x3D;&gt;
         {
            resolve(obj);
         })
         .catch((error : any) &#x3D;&gt;
         {
            reject(error);
         });
      });
   }

}</code></pre>
    </div>

</div>











                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'DatabaseProvider.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <script src="../js/menu-wc.js"></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
