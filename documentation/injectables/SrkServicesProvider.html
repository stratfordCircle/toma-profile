<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>org.txosteo.tomaprofile documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">org.txosteo.tomaprofile documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search">
</div>
            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li>SrkServicesProvider</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/providers/srk-services/srk-services.ts</code>
        </p>



            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_DB">_DB</a>
                            </li>
                            <li>
                                <a href="#clientCypher">clientCypher</a>
                            </li>
                            <li>
                                <a href="#data">data</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#http">http</a>
                            </li>
                            <li>
                                <a href="#isAdmin">isAdmin</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#certDisplayCheck">certDisplayCheck</a>
                            </li>
                            <li>
                                <a href="#decryptString">decryptString</a>
                            </li>
                            <li>
                                <a href="#encryptString">encryptString</a>
                            </li>
                            <li>
                                <a href="#getMemberProfile">getMemberProfile</a>
                            </li>
                            <li>
                                <a href="#getProfileCookies">getProfileCookies</a>
                            </li>
                            <li>
                                <a href="#nameDisplayCheck">nameDisplayCheck</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(http: <a href="https://angular.io/api/http/Http" target="_blank">Http</a>, cookieService: CookieService)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="17" class="link-to-prism">src/providers/srk-services/srk-services.ts:17</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>http</td>
                                                  
                                                        <td>
                                                                    <code><a href="https://angular.io/api/http/Http" target="_blank" >Http</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>cookieService</td>
                                                  
                                                        <td>
                                                                    <code>CookieService</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
        <h3 id="methods">
            Methods
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="certDisplayCheck"></a>
                        <span class="name">
                            <b>
                            certDisplayCheck
                            </b>
                            <a href="#certDisplayCheck"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>certDisplayCheck(collectionObj: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, certFullName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="45" class="link-to-prism">src/providers/srk-services/srk-services.ts:45</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>collectionObj</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                                <tr>
                                                        <td>certFullName</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="decryptString"></a>
                        <span class="name">
                            <b>
                            decryptString
                            </b>
                            <a href="#decryptString"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>decryptString(incomingEncryptedString: )</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="35" class="link-to-prism">src/providers/srk-services/srk-services.ts:35</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>incomingEncryptedString</td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="encryptString"></a>
                        <span class="name">
                            <b>
                            encryptString
                            </b>
                            <a href="#encryptString"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>encryptString(incomingString: )</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="30" class="link-to-prism">src/providers/srk-services/srk-services.ts:30</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>incomingString</td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="getMemberProfile"></a>
                        <span class="name">
                            <b>
                            getMemberProfile
                            </b>
                            <a href="#getMemberProfile"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>getMemberProfile()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="242" class="link-to-prism">src/providers/srk-services/srk-services.ts:242</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="getProfileCookies"></a>
                        <span class="name">
                            <b>
                            getProfileCookies
                            </b>
                            <a href="#getProfileCookies"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>getProfileCookies()</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="174" class="link-to-prism">src/providers/srk-services/srk-services.ts:174</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="nameDisplayCheck"></a>
                        <span class="name">
                            <b>
                            nameDisplayCheck
                            </b>
                            <a href="#nameDisplayCheck"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>nameDisplayCheck(collectionObj: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, certFullName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="126" class="link-to-prism">src/providers/srk-services/srk-services.ts:126</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>collectionObj</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                                <tr>
                                                        <td>certFullName</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="_DB"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            _DB
                            </b>
                            <a href="#_DB"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>_DB:     <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="15" class="link-to-prism">src/providers/srk-services/srk-services.ts:15</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="clientCypher"></a>
                        <span class="name">
                            <b>
                            clientCypher
                            </b>
                            <a href="#clientCypher"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>clientCypher:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>&quot;ishkabibble&quot;</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="14" class="link-to-prism">src/providers/srk-services/srk-services.ts:14</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="data"></a>
                        <span class="name">
                            <b>
                            data
                            </b>
                            <a href="#data"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>data:     <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="17" class="link-to-prism">src/providers/srk-services/srk-services.ts:17</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="http"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Public</span>
                            http
                            </b>
                            <a href="#http"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>http:     <code><a href="https://angular.io/api/http/Http" target="_blank" >Http</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://angular.io/api/http/Http" target="_blank" >Http</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="19" class="link-to-prism">src/providers/srk-services/srk-services.ts:19</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="isAdmin"></a>
                        <span class="name">
                            <b>
                            isAdmin
                            </b>
                            <a href="#isAdmin"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <code>isAdmin:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="16" class="link-to-prism">src/providers/srk-services/srk-services.ts:16</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Http } from &quot;@angular/http&quot;;
import { Injectable } from &quot;@angular/core&quot;;
import CryptoJS from &quot;crypto-js&quot;;
//import { DatabaseProvider } from &quot;../database/database&quot;;
// We MUST import both the firebase AND firestore modules like so
import * as firebase from &quot;firebase&quot;;
import &quot;firebase/firestore&quot;;
import { CookieService } from &quot;ngx-cookie-service&quot;;
//import { resolveDefinition } from &quot;@angular/core/src/view/util&quot;;

@Injectable()
export class SrkServicesProvider {

  clientCypher: string &#x3D; &quot;ishkabibble&quot;;
  private _DB: any;
  isAdmin: boolean;
  data: any;

  constructor(public http: Http, private cookieService: CookieService) {
    this._DB &#x3D; firebase.firestore();
    const settings &#x3D; { timestampsInSnapshots: true }; //FIREBASE MADE A CHANGE TO READ TIMESTAMPS AS TIMESTAMPS INSTEAD OF AS SYSTEM DATE OBJECTS - THESE TWO LINES FORCE THE READ AS A TIMESTAMP TO PREPARE FOR THAT CHANGE WHEN FIREBASE IMPLEMENTS IT OR ELSE IT WOULD BE A BREAKING CHANGE
    this._DB.settings(settings);

    if (this.cookieService.get(&#x27;tokenTOMAAdmin&#x27;)) {   
      this.isAdmin &#x3D; true;
    }

  }

  encryptString(incomingString) {
    var encryptedUser &#x3D; CryptoJS.AES.encrypt(incomingString, this.clientCypher);
    return encryptedUser.toString();
  }

  decryptString(incomingEncryptedString) {
    var bytes_enc_string &#x3D; CryptoJS.AES.decrypt(
      incomingEncryptedString.toString(),
      this.clientCypher
    );

    return bytes_enc_string.toString(CryptoJS.enc.Utf8);
  }

// CHECK IF CURRENT USER SHOULD BE ABLE TO NAVIGATE TO A SPECIFIC CERTIFICATE
certDisplayCheck(collectionObj: string, certFullName: string, ) {

  //    console.log(&#x27;cert display check&#x27;);
  
      //var de_enc_user &#x3D; this.decryptString(this.cookieService.get(&quot;tokenFB_Num&quot;));
      var de_enc_user
      // IF ADMIN, CHECK FOR certTestUser cookie 
      if (this.cookieService.get(&#x27;tokenTOMAAdmin&#x27;)) { 
        /* this.isAdmin &#x3D; true}
      if (this.isAdmin) { */
   //     console.log(&#x27;is admin&#x27;);
  
        de_enc_user &#x3D; this.cookieService.get(&quot;certTestUser&quot;);
   //     console.log(&#x27;enc: &#x27; + de_enc_user)
      } else {
        de_enc_user &#x3D; this.decryptString(this.cookieService.get(&quot;tokenFB_Num&quot;));
      }
  
  //    console.log(&#x27;display check user: &#x27;, de_enc_user);
  //    console.log(&quot;params:&quot;, collectionObj + &#x27;|&#x27; + certFullName + &#x27;|&#x27; + de_enc_user + &#x27;|&#x27;);
  
  /*     if (this.cookieService.get(&#x27;certTestUser&#x27;))
      {
        
      }
   */
      var certDataObj : any &#x3D; []; // STORE RETRIEVED DOCUMENTS
      return new Promise((resolve, reject) &#x3D;&gt; {
        let query &#x3D; this._DB.collection(collectionObj);
        query &#x3D; query.where(&quot;aoa_number&quot;, &quot;&#x3D;&#x3D;&quot;, de_enc_user);
        query &#x3D; query.where(&quot;conference&quot;, &quot;&#x3D;&#x3D;&quot;, certFullName).limit(1); //REMOVE LIMIT OF ONE, RIGHT? HOW MUCH DOES THIS GET SLOWED DOWN? - SRK
        query &#x3D; query
          .get()
          .then(querySnapshot &#x3D;&gt; {
            if (querySnapshot.empty) {
  //            console.log(&#x27;RESOLVE EMPTY&#x27;)
              resolve(false);
            } else {
              
              querySnapshot
              .forEach((doc : any) &#x3D;&gt;
              {
                // TODO: THIS IS WHERE WE LEFT OFF GETTING A NAME // THIS IS NOT NEEDED, ALREADY EXISTS - THIS IS JUST CHECKING IF VALID
                // DO THIS ONLY WHILE NOT FOUND? -SRK
  //              console.log(&#x27;should be many times&#x27;)
                if (doc.data().member_last)
                {
                //  console.log(&#x27;we have a last name: &#x27; + doc.data().member_last)
                  certDataObj.push({
                    member_last : doc.data().member_last
                  })
                }
                if (doc.data().member_first)
                {
  //                console.log(&#x27;we have a first name: &#x27; + doc.data().member_first)
                  certDataObj.push({
                    member_first : doc.data().member_first
                  })
                }              
                if (doc.data().member_middle)
                {
  //                console.log(&#x27;we have a last name: &#x27; + doc.data().member_middle)
                  certDataObj.push({
                    member_middle : doc.data().member_middle
                  })
                }              
              });
  //            console.log(&#x27;RESOLVE TRUE&#x27;)
              // IF TRUE AND IF THERE IS A NAME, WE NEED TO SEND BACK MULTIPLE PIECES OF DATA
              // SRK 12/21
              resolve(true);
            }
          })
          .catch((error: any) &#x3D;&gt; {
  //          console.log(&quot;data error&quot;, error.message);
            reject(error);
          });
      }); // END OF RETURN PROMISE
    }
  
    // CHECK IF CURRENT USER SHOULD BE ABLE TO NAVIGATE TO A SPECIFIC CERTIFICATE
    nameDisplayCheck(collectionObj: string, certFullName: string, ) {
  
  //    console.log(&#x27;cert display check&#x27;);
  
      //var de_enc_user &#x3D; this.decryptString(this.cookieService.get(&quot;tokenFB_Num&quot;));
  
var de_enc_user

      // IF ADMIN, CHECK FOR certTestUser cookie 
      if (this.isAdmin) {
    //    console.log(&#x27;is admin&#x27;);
        de_enc_user &#x3D; this.cookieService.get(&quot;certTestUser&quot;);
    //    console.log(&#x27;enc: &#x27; + de_enc_user)
      } else {
        de_enc_user &#x3D; this.decryptString(this.cookieService.get(&quot;tokenFB_Num&quot;));
      }
  
    //  console.log(&#x27;display check user: &#x27;, de_enc_user);
    //  console.log(&quot;params:&quot;, collectionObj + &#x27;|&#x27; + certFullName + &#x27;|&#x27; + de_enc_user + &#x27;|&#x27;);
  
  /*     if (this.cookieService.get(&#x27;certTestUser&#x27;))
      {
        
      }
   */
      return new Promise((resolve, reject) &#x3D;&gt; {
        let query &#x3D; this._DB.collection(collectionObj);
        query &#x3D; query.where(&quot;aoa_number&quot;, &quot;&#x3D;&#x3D;&quot;, de_enc_user);
        //query &#x3D; query.where(&quot;member_last&quot;, &quot;&#x3D;&#x3D;&quot; !isN)
        query &#x3D; query.where(&quot;conference&quot;, &quot;&#x3D;&#x3D;&quot;, certFullName).limit(1);
        query &#x3D; query
          .get()
          .then(querySnapshot &#x3D;&gt; {
            if (querySnapshot.empty) {
  //            console.log(&#x27;RESOLVE EMPTY&#x27;)
              resolve(false);
            } else {
              resolve(true);
  //            console.log(&#x27;RESOLVE TRUE&#x27;)
            }
          })
          .catch((error: any) &#x3D;&gt; {
  //          console.log(&quot;data error&quot;, error.message);
            reject(error);
          });
      }); // END OF RETURN PROMISE
    }

  getProfileCookies() {

    return new Promise((resolve, reject) &#x3D;&gt; {

      let returnObj: any &#x3D; [];
      let greeting &#x3D; &#x27;- &#x27;;

      let firstName &#x3D; this.cookieService.get(&#x27;token_first&#x27;) + &#x27; &#x27;;
      let middleName &#x3D; this.cookieService.get(&#x27;token_middle&#x27;);
      if (middleName) middleName &#x3D; middleName + &#x27; &#x27;;
      let lastName &#x3D; this.cookieService.get(&#x27;token_last&#x27;);

      let credential &#x3D; this.cookieService.get(&#x27;token_credential&#x27;);
      if (credential) 
      {
        credential &#x3D; &#x27;, &#x27; + credential;
      } else {
        credential &#x3D; &#x27;&#x27;;
      }

      let suffix &#x3D; this.cookieService.get(&#x27;token_suffix&#x27;);

      if (suffix &#x3D;&#x3D;&#x3D; &#x27;DO&#x27; &amp;&amp; credential !&#x3D;&#x3D; &#x27;DO&#x27;)
      {
        credential &#x3D; &#x27;, DO&#x27;;
      }

      if (suffix) {
        if (suffix &#x3D;&#x3D;&#x3D; &#x27;DO.&#x27;) { suffix &#x3D; &#x27;&#x27; }
        else { suffix &#x3D; &#x27; &#x27; + suffix }
      }
      let memberType &#x3D; this.cookieService.get(&#x27;token_membertype&#x27;);
      let token_Num &#x3D; this.cookieService.get(&#x27;tokenFB_Num&#x27;);

      // assemble greeting

      let de_enc_user &#x3D; this.decryptString(this.cookieService.get(&#x27;tokenFB_Num&#x27;));

      if (credential &#x3D;&#x3D;&#x3D; &#x27;, DO&#x27;) {
        greeting &#x3D; greeting + &quot;Dr. &quot; + firstName + &#x27; &#x27; + lastName;
      }
      else {
        greeting &#x3D; greeting + firstName + &#x27; &#x27; + lastName;
      }

      greeting &#x3D; greeting + credential + &#x27; &#x27; + de_enc_user; 

      // return the greeting as well?

      returnObj.push({
        firstName: firstName,
        lastName: lastName,
        middleName: middleName,
        suffix: suffix,
        memberType: memberType,
        aoa_num_enc: token_Num,
        credential: credential,
        de_enc_user: de_enc_user,
        greeting: greeting
      });

      resolve(returnObj);

    });

  }

  
  getMemberProfile() {

    return new Promise((resolve, reject) &#x3D;&gt; {



      var checkName &#x3D; this.cookieService.get(&#x27;certTestUser&#x27;)
 
      if (checkName ) {
      // alert (&#x27;use to get Name: &#x27; + checkName)

      // STILL NEED TO ADD GETMEMBERPROFILE - WILL LOOK LIKE THE BELOW CALL
        /* CALL NEW FUNCTION AND UNPACK IT HERE

        srk.getMemberProfile().then((data) &#x3D;&gt; {
          this.token_credential &#x3D; data[0].credential;
          //if (this.token_credential) {this.token_credential &#x3D; &#x27;, &#x27; + this.token_credential}
          this.token_first &#x3D; data[0].firstName;
          this.token_last &#x3D; data[0].lastName;
          this.token_middle &#x3D; data[0].middleName;
          this.token_suffix &#x3D; data[0].suffix;
          this.token_membertype &#x3D; data[0].memberType;
          this.token_Num &#x3D; data[0].aoa_num_enc;
  
        }); */

        var getToken &#x3D; this.cookieService.get(&#x27;tokenTOMACookie&#x27;);
        console.log(&#x27;https://us-central1-toma-cme.cloudfunctions.net/app/membername/?aToken&#x3D;&#x27; + getToken + &#x27;&amp;memberSearch&#x3D;&#x27; + checkName)
  
        // TAKES THE ACCESS TOKEN TO GET US THE SEARCH URL (ORE RESULTS IF WE DO BOTH IN THE SAME CALL)
        // this.http.get(&#x27;http://localhost:8083/?aToken&#x3D;&#x27; + getToken + &#x27;&amp;memberSearch&#x3D;&#x27; + checkName)
        this.http.get(&#x27;https://us-central1-toma-cme.cloudfunctions.net/app/membername/?aToken&#x3D;&#x27; + getToken + &#x27;&amp;memberSearch&#x3D;&#x27; + checkName)
        .map(res &#x3D;&gt; res.json())
        .subscribe(data &#x3D;&gt; {
      
          this.data &#x3D; data
      
      
//           console.log(&#x27;RETURN *** data from token: &#x27; + this.data)
          console.log(&#x27;RETURN *** data: from token&#x27; + JSON.stringify(this.data))
          
/*           this.slast_name &#x3D; this.data.profiles[0][&quot;[Name | Last]&quot;]
          this.sfirst_name &#x3D; this.data.profiles[0][&quot;[Name | First]&quot;]
          this.smiddle_name &#x3D; this.data.profiles[0][&quot;[Name | Middle]&quot;] */

      let returnObj: any &#x3D; [];
      let greeting &#x3D; &#x27;- &#x27;;

      let firstName &#x3D; this.data.profiles[0][&quot;[Name | First]&quot;] + &#x27; &#x27;;
      let middleName &#x3D; this.data.profiles[0][&quot;[Name | Middle]&quot;]
      if (middleName) middleName &#x3D; middleName + &#x27; &#x27;;
      let lastName &#x3D; this.data.profiles[0][&quot;[Name | Last]&quot;]

      let credential &#x3D; this.data.profiles[0][&quot;02 - Designation&quot;]
      if (credential) 
      {
        credential &#x3D; &#x27;, &#x27; + credential;
      } else {
        credential &#x3D; &#x27;&#x27;;
      }

      let suffix &#x3D; this.data.profiles[0][&quot;[Name | Suffix]&quot;] 

      if (suffix &#x3D;&#x3D;&#x3D; &#x27;DO&#x27; &amp;&amp; credential !&#x3D;&#x3D; &#x27;DO&#x27;)
      {
        credential &#x3D; &#x27;, DO&#x27;;
      }

      if (suffix) {
        if (suffix &#x3D;&#x3D;&#x3D; &#x27;DO&#x27;) { suffix &#x3D; &#x27;&#x27; }
        else { suffix &#x3D; &#x27; &#x27; + suffix }
      }
      let memberType &#x3D; this.data.profiles[0][&quot;[Member Type]&quot;]
      let token_Num &#x3D; this.cookieService.get(&#x27;tokenFB_Num&#x27;);

      // assemble greeting

      let de_enc_user &#x3D; this.decryptString(this.cookieService.get(&#x27;tokenFB_Num&#x27;));

      if (credential &#x3D;&#x3D;&#x3D; &#x27;, DO&#x27;) {
        greeting &#x3D; greeting + &quot;Dr. &quot; + firstName + &#x27; &#x27; + lastName;
      }
      else {
        greeting &#x3D; greeting + firstName + &#x27; &#x27; + lastName;
      }

      greeting &#x3D; greeting + credential + &#x27; &#x27; + de_enc_user; 

      // return the greeting as well?

      returnObj.push({
        firstName: firstName,
        lastName: lastName,
        middleName: middleName,
        credential: credential/* ,
        suffix: suffix,
        memberType: memberType,
        aoa_num_enc: token_Num,
        de_enc_user: de_enc_user,
        greeting: greeting */
      });

      resolve(returnObj);
      
//          console.log(&#x27;name &#x27; + this.sfirst_name + &#x27; &#x27; + this.smiddle_name + &#x27; &#x27; + this.slast_name)
      
          // CAN PACK THESE INTO AN OBJECT, SEND THEM BACK AND POPULATE NAME IN HOME.HTML
      
//        res.send(&#x27;yabba&#x27;)
      
        
      /*     var getProfilesURL &#x3D; data[&quot;url&quot;]
          var getProfilesURLid &#x3D; data[&quot;id&quot;]
            console.log(&#x27;profilesURLid   &#x27; + getProfilesURLid)
          
          console.log(&#x27;profilesURL &#x27; + getProfilesURL)
          console.log(&#x27;name &#x27; + name) */
        
        })

/*         this.srk.searchWithIDandAccessToken(checkName)
        .then((data) &#x3D;&gt;
        {}
        ) */

      }



      

    });

  }

}
</code></pre>
    </div>

</div>











                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'SrkServicesProvider.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <script src="../js/menu-wc.js"></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
